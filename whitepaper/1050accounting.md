## 10.5 Mutable State Accounting Ledger ðŸ’°

The **Mutable State Accounting Ledger** is the only data structure that changes when a smart contract operation executes. It tracks the Content $\text{DAO}$'s real-time financial health according to **wealth-based accounting principles**. Its $\text{CID}$ is referenced by the `mutable\_state\_cid` in the $\text{DAO}$ Configuration Object (Section 10.3).

This ledger serves as the publicly auditable balance sheet for the content asset.

### ðŸ“œ $\text{JSON}$ Schema: Accounting Ledger

```json
{
  "last_updated_block": 875440, // The Bitcoin block height of the last state change

  // 1. INCOME AND REVENUE (Cumulative, for reporting)
  "revenue_ledger": {
    "total_zaps_sats": 0,          // Cumulative value from individual wallet micro-payments
    "total_sales_sats": 0,         // Cumulative value from direct content distribution
    "total_lightning_yield_sats": 0 // Cumulative yield from Liquidity Leasing activities
  },

  // 2. ASSETS (The Current Balance Sheet)
  "assets": {
    "LYW_balance_sats": 0,         // The real-time, available balance of the Locked Yield Wallet
    "pending_inflows_sats": 0      // Value of verified incoming revenue awaiting settlement
  },

  // 3. EXPENSES (Immediate Payables/Liabilities)
  "expenses_payable": {
    "hosting_sats": 0,             // Owed to hosts upon Proof-of-Storage verification
    "upstream_royalty_sats": 0,    // Owed to Parent CIDs based on royalty calculations
    "creator_share_sats": 0        // Owed to the current content creator/DAO stakeholders
  },

  // 4. DEBTS (Capital Owed and Wind-Down Metric)
  "debts": {
    "total_capital_owed_sats": 0,  // The sum of all unpaid expenses (current debt)
    "debt_ceiling_sats": 100000,   // Protocol-defined maximum debt before wind-down trigger
    "expense_debt_history_cid": "QmDebtHistory..." // CID linking to a full, ordered list of unfulfilled expenses
  }
}
```

-----

### Key Components and Operational Logic

#### 1\. Income and Revenue (Auditable History)

These fields provide the auditable history of all funds generated by the asset. Incoming revenue is immediately committed to this ledger upon verification of the $\text{Lightning}$ transaction, before being used to settle expenses or top up assets.

#### 2\. Assets (Persistence Pool)

The primary asset is the **`LYW\_balance\_sats`** (Locked Yield Wallet). This is the pool of $\text{sats}$ reserved for content persistence and royalty distributions. This balance is monitored against the sunset_condition defined in the $\text{DAO}$ Configuration Object.

#### 3\. Expenses (Liabilities Incurred)

These represent liabilities immediately incurred upon the trigger of a payment event (e.g., successful Proof-of-Storage by a host, or a confirmed sale that triggers royalty calculation). They are debts to be paid out of the $\text{LYW}$ balance.

#### 4\. Debts (The Wind-Down Trigger)

The Debts component implements the system's economic fail-safe mechanism:

  * **Debt Incurrence:** An expense transitions into a debt if its payment trigger occurs when the $\text{LYW}$ balance is insufficient to cover the payment.
  * **Total Capital Owed:** This sum represents the capital that the $\text{DAO}$ is obligated to pay but currently lacks the funds for.
  * **Sunset Trigger:** The **`total\_capital\_owed\_sats`** is the metric that feeds into the sunset process (Section 10.3). If the total debt exceeds the pre-defined **`debt\_ceiling\_sats`** for a sustained period, it signals that demand and liquidity are too low to sustain the asset, triggering the graceful sunset process (e.g., release to the public domain).
