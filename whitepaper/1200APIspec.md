# 12. API Specifications üåê

The $\text{IPFS-Sats API}$ provides a $\text{RESTful}$ interface designed to enable seamless, programmatic interaction with the content and governance layers of the protocol. It ensures all operations, particularly those involving value transfer ($\text{Zaps}$ and $\text{Royalties}$), are verifiable, immutable, and secured via cryptographically-signed message payloads.

---

## 12.1 Core Endpoints (Content & Monetization)

These endpoints handle the fundamental operations of content storage, retrieval, authenticity verification, and direct creator monetization.

| Endpoint | Method | Description |
| :--- | :--- | :--- |
| `/api/v2/content/upload` | $\text{POST}$ | Publishes new content to the network. The request includes the raw data and the Metadata Bundle, resulting in a unique $\text{CID}$ anchored to the Bitcoin blockchain. |
| `/api/v2/content/{cid}` | $\text{GET}$ | Retrieves the raw content data and associated Metadata Bundle, including its current version and historical provenance details. |
| `/api/v2/content/verify` | $\text{POST}$ | Allows a user to check the integrity of a locally-stored file against the immutable hash ($\text{CID}$) recorded on the network, ensuring the content has not been tampered with ($\text{Right to Verify}$). |
| `/api/v2/payment/zap` | $\text{POST}$ | Facilitates instant, unidirectional micro-payments (**"Zaps"**) to a content creator. Payments are executed via an integrated $\text{Lightning Network}$ gateway, enabling atomic value-for-content exchange. |

---

## 12.2 DAO Operations (Governance)

These endpoints govern the interactions with the protocol's $\text{Decentralized Autonomous Organization (DAO)}$, allowing for community-driven updates, fee adjustments, and resolution of content disputes via the smart contract.

| Endpoint | Method | Description |
| :--- | :--- | :--- |
| `/api/v2/dao/proposal` | $\text{POST}$ | Submits a new governance proposal for community review and voting. Requires sufficient stake (proposal_threshold) and logs the proposal payload immutably. |
| `/api/v2/dao/vote` | $\text{POST}$ | Allows staked token holders to register their cryptographic vote ($\text{Yes/No/Abstain}$) on an active proposal, with weight calculated based on the $\text{DAO}$'s defined rules (Section 10.3). |
| `/api/v2/dao/execute` | $\text{POST}$ | Triggers the execution of a proposal's embedded smart contract function, provided the vote has met the required consensus and quorum thresholds. |
| `/api/v2/dao/ledger/{cid}` | $\text{GET}$ | Queries the **Mutable State Accounting Ledger** for the specified content $\text{DAO}$, providing real-time financial health, assets, and liabilities (Section 10.5). |

---

## 12.3 Fork Management (Attribution & Royalties)

The fork management $\text{API}$ is critical for enabling derivative works while protecting creators' rights, automating the distribution of revenue across the entire lineage of a content piece ($\text{Fork Economics}$).

| Endpoint | Method | Description |
| :--- | :--- | :--- |
| `/api/v2/fork/create` | $\text{POST}$ | Registers a new derivative work ($\text{Child}$) by linking a new_cid to its parent_cid. This action automatically inherits and activates the parent content's defined royalty split structure (Section 10.4). |
| `/api/v2/fork/royalties/{cid}` | $\text{GET}$ | Provides a transparent ledger query detailing all revenue generated by a specific $\text{CID}$ (or its forks) and the automated distribution of payments to all upstream contributors. |
| `/api/v2/fork/provenance/{cid}` | $\text{GET}$ | Traces the complete lineage of a content piece, detailing all parent $\text{CIDs}$, subsequent $\text{Forks}$, and the full **Attribution Chain** back to the original genesis source (Section 10.4). |
